#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# Run gitleaks if available; skip gracefully if not installed
if command -v gitleaks >/dev/null 2>&1; then
  echo "Running gitleaks secret scan..."
  gitleaks detect --source . --no-git --redact
  status=$?
  if [ $status -ne 0 ]; then
    echo "gitleaks found potential secrets. Commit aborted. Review and fix."
    exit $status
  fi
else
  echo "gitleaks not found; skipping secret scan. Install with: brew install gitleaks"
fi

# Add your linters/formatters here if desired
